<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- add description and keywords for SEO -->
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Installing Go from source | Suhas Bharadwaj</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Installing Go from source" />
<meta name="author" content="Suhas Bharadwaj" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A simple guide to install multiple versions of Go on the same machine. Particularly useful while installing Go from source." />
<meta property="og:description" content="A simple guide to install multiple versions of Go on the same machine. Particularly useful while installing Go from source." />
<link rel="canonical" href="http://localhost:4000/install-multiple-versions-go" />
<meta property="og:url" content="http://localhost:4000/install-multiple-versions-go" />
<meta property="og:site_name" content="Suhas Bharadwaj" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-25T00:00:00+05:30" />
<script type="application/ld+json">
{"description":"A simple guide to install multiple versions of Go on the same machine. Particularly useful while installing Go from source.","author":{"@type":"Person","name":"Suhas Bharadwaj"},"@type":"BlogPosting","url":"http://localhost:4000/install-multiple-versions-go","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/nr-logo.jpg"},"name":"Suhas Bharadwaj"},"headline":"Installing Go from source","dateModified":"2017-06-25T00:00:00+05:30","datePublished":"2017-06-25T00:00:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/install-multiple-versions-go"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="description" content="A simple guide to install multiple versions of Go on the same machine. Particularly useful while installing Go from source.">
  
 <meta name="keywords" content="multiple versions, golang, go, same, computer, machine, how to, install, source code, HEAD, source repo" />
  
  
  <meta name="author" content="Suhas Bharadwaj">
  <meta name="copyright" content="&copy; Suhas Bharadwaj 2018">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/monokai_sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <!--<link rel="shortcut icon" href="/favicon.ico">
  <link rel="icon" sizes="16x16 32x32 64x64" href="/assets/icons/favicon.ico">
  <link rel="icon" type="image/png" sizes="196x196" href="/assets/icons/favicon-192.png">
  <link rel="icon" type="image/png" sizes="160x160" href="/assets/icons/favicon-160.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96.png">
  <link rel="icon" type="image/png" sizes="64x64" href="/assets/icons/favicon-64.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16.png">
  <link rel="apple-touch-icon" href="/assets/icons/favicon-57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/favicon-114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/favicon-72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/favicon-144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/favicon-60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/favicon-120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/favicon-76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/favicon-152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon-180.png">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="/assets/icons/favicon-144.png">
  <meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">-->
<link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="//assets/icons/avicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="I wanted to contribute to the Go source (the programming language itself) but that meant I needed to have two go versions on my machine - the one I am using ..." />
  <meta property="og:url" content="http://localhost:4000/install-multiple-versions-go" />
  <meta property="og:site_name" content="Suhas Bharadwaj" />
  <meta property="og:title" content="Installing Go from source" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://localhost:4000/assets/nr-logo.jpg" />
  <meta property="og:image:type" content="image/jpg" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
    
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Installing Go from source">
  <meta name="twitter:description" content="I wanted to contribute to the Go source (the programming language itself) but that meant I needed to have two go versions on my machine - the one I am using ...">
  <meta name="twitter:image" content="http://localhost:4000/assets/nr-logo.jpg">
  <meta name="twitter:url" content="http://localhost:4000">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/install-multiple-versions-go">
  <link rel="alternate" type="application/rss+xml" title="Suhas Bharadwaj" href="http://localhost:4000/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/nr-logo.jpg" alt="Suhas Bharadwaj">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
          <li class="nav-link">
<a href="/about/">About Me</a>
          
        
          
          </li>
<li class="nav-link">
<a href="/archive/">Archive</a>
          
        
          
        
          
        
          
        
          
        
          
          </li>
<li class="nav-link">
<a href="/talks/">Talks</a>
          
        
          
        
          
        
          
        
          
        
      </li>
</ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container ">
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">Installing Go from source</h1>
      <p class="info">by <strong>Suhas Bharadwaj</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">June 25, 2017</div>
  <div class="post-categories">
  
  </div>
</section>

<article class="post-content">
  <p>I wanted to contribute to the Go source (the programming language itself) but that meant I needed to have two go versions on my machine - the one I am using currently (1.8.1) and the HEAD. This is a post explaining how to achieve that. Please note that I am on Linux and I am <em>not</em> using gvm for installing Go.</p>

<h2 id="get-the-source-code">Get the source code</h2>

<p>You need to get the Go source code first, of course. The Go team has excellent instructions <a href="https://golang.org/doc/contribute.html">here</a>. Essentially you need to checkout the source repo anywhere <strong>outside your GOPATH</strong>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone https://go.googlesource.com/go
</code></pre></div></div>

<p>Next, youâ€™ll need to build this version of Go.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>go/src <span class="o">&amp;&amp;</span> ./all.bash
</code></pre></div></div>

<h2 id="oh-no-errors">Oh no! Errors!</h2>

<p>Sadly, for me, this lead to an error as shown below:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">##### Building Go bootstrap tool.</span>
cmd/dist
ERROR: Cannot find /home/nikhita/go1.4/bin/go.
Set <span class="nv">$GOROOT_BOOTSTRAP</span> to a working Go tree <span class="o">&gt;=</span> Go 1.4.
</code></pre></div></div>

<p>But hey, I was already on Go 1.8.1! So I needed to set <code class="highlighter-rouge">$GOROOT_BOOTSTRAP</code> environment variable to point to the Go 1.8.1 binary. This error occurs because it defaults to <code class="highlighter-rouge">$GOROOT</code> if not specified and my <code class="highlighter-rouge">$GOROOT</code> is also not set (since I donâ€™t have a custom installation). Oops.</p>

<p>The simple fix:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">GOROOT_BOOTSTRAP</span><span class="o">=</span>/usr/local/go
</code></pre></div></div>

<p>Build the binary using <code class="highlighter-rouge">./all.bash</code> again. It should work now! <img class="emoji" title=":tada:" alt=":tada:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f389.png" height="20" width="20"></p>

<h2 id="aliasing">Aliasing</h2>

<p>You have two Go binaries installed on your machine now. Yay! But now what? How should you decide which version needs to be invoked when you run <code class="highlighter-rouge">go version</code>?</p>

<p>In my case, I had 1.8.1 installed already and itâ€™s binary was already in my <code class="highlighter-rouge">$PATH</code> so this was my <strong>default</strong> version.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>go version
go version go1.8.1 linux/amd64
</code></pre></div></div>

<p>To invoke your new, shiny Go binary from HEAD, youâ€™ll need to use <code class="highlighter-rouge">go/bin/go version</code> where you installed the source repo. Itâ€™s better to alias this so that you wonâ€™t have to repeat this every time. Add something like this in your .zshrc/.bashrc/what-have-you - <code class="highlighter-rouge">alias godev=/home/nikhita/go-dev/go/bin/go</code>. Now when you run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>godev version
go version devel +8ec7a39fec Sat Jun 24 00:54:01 2017 +0000 linux/amd64
</code></pre></div></div>

<p>Viola! <img class="emoji" title=":boom:" alt=":boom:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a5.png" height="20" width="20"></p>


</article>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=Installing+Go+from+source&amp;url=http%3A%2F%2Flocalhost%3A4000%2Finstall-multiple-versions-go&amp;via=readfead" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
      <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Flocalhost%3A4000%2Finstall-multiple-versions-go" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
        <i class="fa fa-linkedin-square fa-lg"></i>
      </a>
    
    
    
    
  
</section>

  <section class="post-navigation">
    <span class="prev-post">
      
        <a href="/how-to-update-vscode">
          <span class="fa-stack fa-lg">
            <i class="fa fa-square fa-stack-2x"></i>
            <i class="fa fa-angle-double-left fa-stack-1x fa-inverse"></i>
          </span>
          <span class="page-number">How to update VSCode on Linux</span>
        </a>
      
    </span>
    <span class="next-post">
      
        <a href="/gsoc-kubernetes-making-customresources-more-awesome">
          <span class="page-number">Google Summer of Code with Kubernetes</span>
          <span class="fa-stack fa-lg">
            <i class="fa fa-square fa-stack-2x"></i>
            <i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      
    </span>
  </section>




<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'suhasramblings';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link">
<a href="/about/">About Me</a>
        
        
        
          </li>
<li class="nav-link">
<a href="/archive/">Archive</a>
        
        
        
        
        
        
        
        
        
        
        
          </li>
<li class="nav-link">
<a href="/talks/">Talks</a>
        
        
        
        
        
        
        
        
        
        
      </li>
</ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:suhaspbharadwaj@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">suhaspbharadwaj@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/readfead" title="Follow me on Twitter" target="_blank">
              <i class="fa fa-twitter"></i>
              <span class="username">readfead</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.quora.com/profile/Suhas-Bharadwaj" title="Follow me on Quora" target="_blank">
              <i class="fa fa-quora"></i>
              <span class="username">Suhas-Bharadwaj</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/suhas-p-bharadwaj" title="Fork me on GitHub" target="_blank">
              <i class="fa fa-github"></i>
              <span class="username">suhas-p-bharadwaj</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.linkedin.com/in/suhas-bharadwaj-ab06b638/" title="Connect with me on LinkedIn" target="_blank">
              <i class="fa fa-linkedin"></i>
              <span class="username">suhas-bharadwaj-ab06b638</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS <i class="fa fa-rss"></i></a></strong></p>
      <p class="text">A personal website about technical things I find useful. Also, random ramblings and rants.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>
<script id="dsq-count-scr" src="//iammichaelhudson.disqus.com/count.js" async></script>
<script>

$(document).ready(function() {

  // Syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

  //Make sure all the post's links open in a new tab
  jQuery('.post-content a, .post-excerpt a').not('.footnote, .reversefootnote').attr ('target', '_blank');

});

</script>




  </body>

</html>
